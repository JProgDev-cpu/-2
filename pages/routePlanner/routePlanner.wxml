<view class="container">
  <!-- äº¤é€šæ–¹å¼é€‰æ‹© -->
  <view class="transport-selector">
    <view 
      class="transport-item {{transportMode === 'driving' ? 'active' : ''}}"
      bindtap="switchTransport"
      data-mode="driving"
    >
      <text class="transport-icon">ğŸš—</text>
      <text>é©¾è½¦</text>
    </view>
    <view 
      class="transport-item {{transportMode === 'transit' ? 'active' : ''}}"
      bindtap="switchTransport"
      data-mode="transit"
    >
      <text class="transport-icon">ğŸšŒ</text>
      <text>å…¬äº¤</text>
    </view>
    <view 
      class="transport-item {{transportMode === 'walking' ? 'active' : ''}}"
      bindtap="switchTransport"
      data-mode="walking"
    >
      <text class="transport-icon">ğŸš¶</text>
      <text>æ­¥è¡Œ</text>
    </view>
  </view>

  <!-- æ™¯ç‚¹é€‰æ‹©åˆ—è¡¨ -->
  <scroll-view class="spots-selector" scroll-y>
    <view class="section-title">é€‰æ‹©è¦æ¸¸è§ˆçš„æ™¯ç‚¹</view>
    <view 
      class="spot-item {{selectedSpots.includes(item.id) ? 'selected' : ''}}"
      wx:for="{{spots}}" 
      wx:key="id"
      bindtap="toggleSpot"
      data-id="{{item.id}}"
    >
      <image src="{{item.image}}" mode="aspectFill"></image>
      <view class="spot-info">
        <text class="spot-name">{{currentLang === 'th' ? item.name : (currentLang === 'zh' ? item.name_zh : item.name_en)}}</text>
        <text class="visit-time">å»ºè®®æ¸¸è§ˆæ—¶é—´ï¼š{{item.visitTime}}åˆ†é’Ÿ</text>
        <text class="suggest-time">{{item.suggestTime}}</text>
      </view>
      <view class="checkbox">
        <icon type="success" size="20" color="#4CAF50" wx:if="{{selectedSpots.includes(item.id)}}"/>
      </view>
    </view>
  </scroll-view>

  <!-- ç”Ÿæˆè·¯çº¿æŒ‰é’® -->
  <view class="generate-button" bindtap="generateRoute">
    ç”Ÿæˆæœ€ä½³è·¯çº¿
  </view>

  <!-- è·¯çº¿è¯¦æƒ… -->
  <view class="route-details {{showRouteDetails ? 'show' : ''}}">
    <view class="details-header">
      <text class="details-title">æ¨èè·¯çº¿</text>
      <icon type="cancel" size="24" color="#999" bindtap="closeRouteDetails"></icon>
    </view>

    <scroll-view class="details-content" scroll-y>
      <view class="summary">
        <view class="summary-item">
          <text class="label">æ€»è·ç¦»</text>
          <text class="value">{{routeDetails.totalDistance.toFixed(1)}}å…¬é‡Œ</text>
        </view>
        <view class="summary-item">
          <text class="label">æ¸¸è§ˆæ—¶é—´</text>
          <text class="value">{{routeDetails.totalTime}}åˆ†é’Ÿ</text>
        </view>
      </view>

      <view class="route-segments">
        <view class="segment" wx:for="{{routeDetails.segments}}" wx:key="index">
          <view class="segment-line">
            <view class="dot"></view>
            <view class="line"></view>
          </view>
          <view class="segment-content">
            <view class="segment-header">
              <text class="from">{{item.from}}</text>
              <text class="distance">{{item.distance}}km</text>
            </view>
            <view class="segment-info">
              <text class="duration">çº¦{{item.duration}}åˆ†é’Ÿ</text>
              <button 
                class="nav-btn" 
                size="mini" 
                bindtap="startNavigation" 
                data-index="{{index}}"
              >å¯¼èˆª</button>
            </view>
          </view>
        </view>
      </view>
    </scroll-view>
  </view>
</view> 